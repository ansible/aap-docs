:_content-type: PROCEDURE

[id="create-bundle-secret_{context}"]

= Creating a bundle secret to trust a custom Certificate Authority

If you encounter a scenario where you need to trust a custom Certificate Authority, you can customize a few variables for the {LightspeedShortName} instance. Trusting a custom Certificate Authority enables the {LightspeedShortName} instance to access network services configured with SSL certificates issued locally, such as cloning a project from an internal Git server via HTTPS. 

If you encounter the following error when syncing projects, it indicates that you need to customize the variables. 

----
fatal: unable to access 'https://private.repo./mine/ansible-rulebook.git': SSL certificate problem: unable to get local issuer certificate
----

.Procedure

* Use one of the following methods to create a custom bundle secret using the CLI: 

** *Using a Certificate Authority secret*
+
Create a `bundle_cacert_secret` using  the following command:
+
----
# kubectl create secret generic <resourcename>-custom-certs \ 
    --from-file=bundle-ca.crt=<PATH/TO/YOUR/CA/PEM/FILE> <1>
----
+
*Where*:
<1>: Path of the self-signed certificate. Modify the file path to point to where your self-signed certificates are stored. The {LightspeedShortName} instance looks for the data field `bundle-ca.crt` in the specified `bundle_cacert_secret` secret.
+
The following is an example of a bundle CA certificate:
+
----
spec:
  ...
  bundle_cacert_secret: <resourcename>-custom-certs
----

* *Using the `kustomization.yaml` configuration file*
+
Use the following command:
+
----
secretGenerator:
  - name: <resourcename>-custom-certs
    files:
      - bundle-ca.crt=<path+filename>
    options:
      disableNameSuffixHash: true
----
+
After you create the bundle secret, you must select the secret when you  xref:create-lightspeed-instance_configuring-lightspeed-onpremise[create and deploy a {LightspeedshortName} instance].

[role="_additional-resources"]
.Additional resources
* xref:ref-troubleshooting-lightspeed-onpremise-config_troubleshooting-lightspeed[Troubleshooting {LightspeedShortName} on-premise deployment errors]
