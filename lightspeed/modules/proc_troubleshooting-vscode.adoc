:_content-type: PROCEDURE

[id="troubleshooting-vscode_{context}"]
= Troubleshooting Ansible Visual Studio Code extension errors

== Cannot view the generated code recommendations using the Ansible VS Code extension

The following scenarios are possible: 

* You receive a `403 error` message.
+
To resolve this error, ensure that:

** Your organization administrator has configured {LightspeedShortName} for your organization. 
** You meet *one* of the following requirements:

*** Your organization has a trial or paid subscription to both the {PlatformName} and {ibmwatsonxcodeassistant}.
*** Your organization has a trial or paid subscription to the {PlatformName}, and you have a {LightspeedShortName} trial account.

* You have not configured the required Ansible VS code extension settings.
** To resolve this error, ensure that you have enabled the *Lightspeed:Enabled* and menu:Lightspeed[Suggestions:Enabled] settings. For more information, see xref:configure-vscode-extension_configuring-with-code-assistant[Configure the Ansible VS Code extension].

* You receive a `Failure on completion requests` error when you make inference requests in VS Code.
+
If you are part of an organization that has a trial or paid subscription to both {PlatformNameShort} and {ibmwatsonxcodeassistant}, but your organization administrator has not configured an {ibmwatsonxcodeassistant} model for your organization, you will encounter a `Failure on completion requests` error when you make inference requests in VS Code. 

* You receive an `Ansible Lightspeed encountered an error. Try again after some time.` error message when you make single-task or multitask requests.
+
This error occurs when you use a remote SSH extension with VS Code to request single or multitask recommendations in playbooks. However, the task recommendations are generated when using a role. This error occurs in workspaces that contain a large number of roles.  

* Your VS Code Workspace settings override user settings.
+
If your Workspace settings are configured, they can override our user settings even if you have configured the Ansible VS Code extension correctly. The Workspace settings can disable your VS Code extension settings, and therefore you cannot access the Ansible Lightspeed service. 
+
To resolve this error, ensure that there are no Workspace settings configured in VS Code. For more information, see link:https://code.visualstudio.com/docs/getstarted/settings#_workspace-settings[Workspace settings] in the VS Code documentation. 

* You entered a multitask prompt, but code recommendations were not generated.
+
To resolve this error, log out of VS Code and log in again using your Red Hat account. 

* You clicked a different location or switched to a different window; therefore, the populated code recommendations disappeared. 
+
The {LightspeedShortName} service could take multiple seconds per task to populate the code recommendations. If you are using a multitask prompt, the {LightspeedShortName} service takes a bit longer to populate the results. Do not move your cursor or press any key while the code recommendation is being generated. If you change the cursor location or press any key, the Ansible VS Code extension cancels the request and the {LightspeedShortName} service does not process your request. In this scenario, you must get the cursor back to its original position and repopulate the results.  

== Cannot request code recommendations by using the Ansible VS Code extension

The following error message is displayed: +
`Your trial to the generative AI model has expired. Refer to your IBM Cloud Account to re-enable access to the {ibmwatsonxcodeassistant}.`

To resolve this error, refer to your IBM Cloud account and select an upgrade option. 

== Cannot connect to the Ansible VS Code extension when using a proxy configuration

You might encounter errors when connecting with to the Ansible VS Code extension through a proxy. Connections to the Ansible Lightspeed portal link:https://c.ai.ansible.redhat.com[https://c.ai.ansible.redhat.com] fail and the Ansible logs display one ore more of the following lines that confirm that your proxy is blocking the connection: 

....
[ansible-lightspeed-oauth] error message: Request failed with status code
[ansible-lightspeed-oauth] error response data:
[ansible-lightspeed-user] error response data:
....

To resolve this issue, you must add the Ansible Lightspeed portal URL link:https://c.ai.ansible.redhat.com[https://c.ai.ansible.redhat.com] and link:https://sso.redhat.com[https://sso.redhat.com] (if RH-SSO is used to authenticate users) in the VS Code proxy settings. 

Perform the following steps:

. Open Visual Studio Code.
. Navigate to *Code* > *Settings* > *Settings*. 
. From the *Settings* editor, select menu:Application[Proxy]. 
. In the *Proxy* field, add the following URLs:

* `*\https://c.ai.ansible.redhat.com/*` 
* `*\https://sso.redhat.com*`, if RH-SSO is used to authenticate users 

. From the *Proxy Support* list, select *override*. 
+
You should now be able to access the Ansible Lightspeed portal link:https://c.ai.ansible.redhat.com[https://c.ai.ansible.redhat.com] through a proxy.  

For information about how to set up proxy support in VS Code, see link:https://code.visualstudio.com/docs/setup/network#_proxy-server-support[Proxy server support] in VS Code documentation and link:https://www.chromium.org/developers/design-documents/network-stack/proxy-settings-fallback/[Proxy settings and fallback] in The Chromium Project documentation.