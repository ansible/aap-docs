:_content-type: PROCEDURE

[id="monitor-lightspeed-onpremise-deployment_{context}"]

= Monitoring your {LightspeedShortName} on-premise deployment

After the {LightspeedShortName} on-premise deployment is successful, use the following procedure to monitor the metrics on an API endpoint `/metrics`. 

.Procedure

. Create a *system auditor* user:
.. Create a user with a *system auditor* role in the {PlatformName}. For the procedure, see the link:{URLGettingStarted}/assembly-gs-platform-admin#proc-gs-platform-admin-create-user[Creating a user] section of _{TitleGettingStarted}_.

.. Verify that you can log in to the Ansible Lightspeed portal for on-premise deployment (`\https://<lightspeed_route>/`) as the newly-created system auditor user, and then log out.

. Create a token for the *system auditor* user:
.. Log in to the Ansible Lightspeed portal for on-premise deployment (`\https://<lightspeed_route>/admin`) as an administrator by using the following credentials:
+
* Username: *admin*
* Password: The secret that is named as `<lightspeed-custom-resource-name>-admin-password` in the {OCP} cluster namespace where {LightspeedShortName} is deployed. 

.. On the Django administration window, select *Users* from the Users area. A list of users is displayed.
.. Verify that the user with the system auditor role is listed in the *Users* list.
.. From the Django Oauth toolkit area, select menu:Access tokens[Add].
.. Provide the following information and click *Save*:

* *User*: Use the magnifying glass icon to search and select the user with the system auditor role.
* *Token*: Specify a token for the user. Copy this token for later use.
* *Id token*: Select the token ID. 
* *Application*: Select *Ansible Lightspeed for VS Code*. 
* *Expires*: Select the date and time when you want the token to expire.  
* *Scope*: Specify the scope as *read write*. 
+
An access token is created for the user with a system auditor role.

.. Log out from the Ansible Lightspeed portal for on-premise deployment.

. Monitor your Red Hat Ansible Lightspeed on-premise deployment, by using the authorization token of the user with the system auditor role, to access the metrics endpoint `\https://<lightspeed_route>/metrics`. 