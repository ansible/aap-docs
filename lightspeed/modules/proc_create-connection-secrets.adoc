:_content-type: PROCEDURE

[id="create-connection-secrets_{context}"]

= Creating a model configuration secret

You must create a configuration secret to connect to an {ibmwatsonxcodeassistant} model, which can be either an on-premise deployment or a cloud deployment.

.Prerequisites
* You have installed the {PlatformNameShort} operator 2.5.0-0.1753402603 or later on the {OCP}. 
* You have created an OAuth application in the {ControllerName}.
* You have obtained an API key and a model ID from {ibmwatsonxcodeassistant}. 
+
For information about obtaining an API key and model ID from {ibmwatsonxcodeassistant}, see the link:https://cloud.ibm.com/docs/watsonx-code-assistant[{ibmwatsonxcodeassistant} documentation]. For information about installing {ibmwatsonxcodeassistant} for {LightspeedshortName} on Cloud Pak for Data, see the link:https://www.ibm.com/docs/en/software-hub/5.1.x?topic=services-watsonx-code-assistant-red-hat-ansible-lightspeed[ watsonx Code Assistant for {LightspeedshortName} on Cloud Pak for Data documentation].

.Procedure
. Go to the {OCP}. 
. Select menu:Workloads[Secrets].
. Click menu:Create[Key/value secret].
. From the *Projects* list, select the namespace that you created when you installed the {PlatformName} operator.
. Click menu:Create[Key/value secret].
. In *Secret name*, enter a unique name for the secret. For example, `model-aiconnect`.
. Add the following keys and their associated values individually:
+
[cols="30%,70%",options="header"]
|===
|Key |Value

|`username`
d|_For on-premise deployment only_

Enter the username you use to connect to an IBM Cloud Pak for Data deployment.

|`model_type`
a|Enter one of the following values per your {ibmwatsonxcodeassistant} model:

* For on-premise deployment (IBM Cloud Pak for Data): `wca-onprem`

* For cloud deployment (IBM Cloud): `wca`

|`model_url`
|Enter the URL of the {ibmwatsonxcodeassistant} model.

|`model_api_key`
|Enter the API key of your {ibmwatsonxcodeassistant} model that was generated during the model installation. 

|`model_id`
|Enter the ID of your {ibmwatsonxcodeassistant} model.

|`model_verify_ssl`
d|_Optional, and supported on {PlatformNameShort} {PlatformVers} only_

This key controls whether the SSL certificate of the {ibmwatsonxcodeassistant} model is verified. 
 
Default = `true`

|`model_enable_anonymization`
d|_Optional and supported on Ansible Automation Platform 2.5.250730 and later_ 

This key controls whether the anonymization of Personally Identifiable Information (PII) is enabled. PII information includes passwords, IP addresses, email addresses, and other sensitive data. When PII anonymization is enabled, users' personal information is modified to some generic values to protect their data and reduce the risk of data leaks. 

You can turn off the anonymization by specifying the value as false if you want to retain all original information as entered by users and improve the quality of the answers. If you set the value to `false` and the Ansible administrator is using Ansible Lightspeed in hybrid mode (where the model is in {ibmwatsonxcodeassistant} in IBM Cloud) then their users' PII is sent to IBM Cloud.

Default = `true`
|===
+
[IMPORTANT]
====
Ensure that you do not accidentally add any whitespace characters (extra line, space, and so on) to the value fields. If there are any extra or erroneous characters in the secret, the connection to {ibmwatsonxcodeassistant} fails.
====

. Click *Create*. 
+
After you create the model configuration secret, you must update the YAML file of the {PlatformNameShort} operator.
