:_mod-docs-content-type: CONCEPT

[id="vault-migration-examples-kv2-secret-info"]

= Migration examples for the `hashicorp.vault.kv2_secret_info` module

[role="_abstract"]

The following examples show before and after configurations for the `hashicorp.vault.kv2_secret_info` module.

.Example 1: Read a secret with token authentication
[example]

Before (community.hashi_vault)

----
- name: Read the latest version of a kv2 secret from Vault  community.hashi_vault.vault_kv2_get:
    url: https://vault.example.com:8200
    token: "{{ vault_token }}"
    path: myapp/config
  register: response
----

After (hashicorp.vault)

----
- name: Read a secret with token authentication
  hashicorp.vault.kv2_secret_info:
    url: https://vault.example.com:8200
    token: "{{ vault_token }}"
    path: myapp/config
----

.Example 2: Read a secret with a specific version

Before (community.hashi.vault)

----
- name: Read version 5 of a secret from kv2
  community.hashi_vault.vault_kv2_get:
    url: https://vault.example.com:8200
    path: myapp/config
    version: 5
----

After (hashicorp.vault)

----
- name: Read a secret with a specific version
  hashicorp.vault.kv2_secret_info:
    url: https://vault.example.com:8200
    path: myapp/config
    version: 1
----