:_mod-docs-content-type: CONCEPT

[id="vault-auth-architecture"]

= Authentication architecture

[role="_abstract"]

The `hashicorp.vault` collection manages authentication through environment variables and client initialization. This approach enhances security by preventing sensitive credentials from being passed directly as module parameters within playbook tasks.

The `hashicorp.vault` collection injects credentials into job templates with environment variables, so you get simpler, cleaner task definitions while ensuring that authentication details remain secure.

The following authentication types are supported:

* **appRole authentication:** Use either one of the following methods when using appRole authentication:

** Set the `VAULT_APPROLE_ROLE_ID` and `VAULT_APPROLE_SECRET_ID` environment variables. When you use environment variables, you must also create a custom credential type and credentials that will be passed to the job template.

** Directly pass the `role_id` and `secret_id` parameters to the tasks, for example:
+
----
- name: Create a secret with AppRole authentication
  hashicorp.vault.kv2_secret:
    url: https://vault.example.com:8200
    auth_method: approle
    role_id: "{{ vault_role_id }}"
    secret_id: "{{ vault_secret_id }}"
    path: myapp/config
    data:
      api_key: secret-api-key
----

* **Token authentication:** Set the `VAULT_TOKEN` environment variable. 
+
Optionally, you can configure parameters for the token. If parameters are not provided, then the module uses environment variables.
