[id="ref-scenario-update-hub-ca-cert"]

= Updating the {HubName} CA certificate


[role="_abstract"]
Use this example to populate the definition file to include a CA certificate to the `additional-build-files` section, move the file to the appropriate directory and, finally, run the command to update the dynamic configuration of CA certificates.

-----
version: 3

images:
  base_image:
    name: registry.redhat.io/ansible-automation-platform-24/ee-minimal-rhel9:latest  # vanilla image

dependencies:
  # Collections to be installed
  galaxy:
    collections:
      - ansible.utils

additional_build_files:
  # copy the CA public key into the build context, we will copy and use it in the base image later"
  - src: files/rootCA.crt
    dest: configs

additional_build_steps:
  prepend_base:
    # copy a custom CA cert into the base image and recompute the trust database
    # because this is in "base", all stages will inherit (including the final EE)
    - COPY _build/configs/rootCA.crt /usr/share/pki/ca-trust-source/anchors
    - RUN update-ca-trust
-----
