:_mod-docs-content-type: REFERENCE
[id="rpm-b-env-a"]
= RPM {EnterpriseTopology}

[role="_abstract"]
The RPM-based {EnterpriseTopology} provides redundancy and higher compute for large volumes of automation. 
Included are the tested infrastructure topology, system requirements, network port configurations, and an example inventory file for installation.

== Infrastructure topology
The Red{nbsp}Hat tested infrastructure topology for this deployment model:

.Infrastructure topology diagram
image::rpm-b-env-a.png[RPM {EnterpriseTopology} diagram]

Red Hat tests each VM with these requirements:

include::snippets/rpm-tested-vm-config.adoc[]

.Infrastructure topology components
[options="header"]
|====
| VM count | Purpose | Example VM group names
| 2 | {GatewayStart} with colocated Redis | `automationgateway` 
| 2 | {ControllerNameStart} | `automationcontroller`
| 2 | {PrivateHubNameStart} with colocated Redis | `automationhub`
| 2 | {EDAName} with colocated Redis | `automationedacontroller`
| 1 | {AutomationMeshStart} hop node | `execution_nodes`
| 2 | {AutomationMeshStart} execution node | `execution_nodes`
| 1 | Externally managed database service | N/A
| 1 | HAProxy load balancer in front of {Gateway} (externally managed) | N/A
|====

[NOTE]
====
* Redis high availability (HA) deployment requires 6 VMs. You can colocate Redis on each {PlatformNameShort} component VM except for {ControllerName}, execution nodes, or the PostgreSQL database.
* RPM-based deployments of {PlatformNameShort} do not support external Redis.
====

== Tested system configurations

Red{nbsp}Hat has tested these configurations to install and run {PlatformName}:

include::snippets/rpm-env-a-tested-system-config.adoc[]

== Network ports

{PlatformName} uses several ports to communicate with its services. 
These ports must be open and available for {PlatformName} to work. 
Ensure that these ports are available and are not blocked by a firewall.

.Network ports and protocols
[options="header"]
|====
| Port number | Protocol | Service | Source | Destination
| 80/443 | TCP | HTTP/HTTPS | {EDAName} | {HubNameStart}
| 80/443 | TCP | HTTP/HTTPS | {EDAName} | {ControllerNameStart}
| 80/443 | TCP | HTTP/HTTPS | {ControllerNameStart} | {HubNameStart}
| 80/443 | TCP | HTTP/HTTPS | HAProxy load balancer | {GatewayStart}
| 80/443 | TCP | HTTP/HTTPS | {GatewayStart} | {ControllerNameStart}
| 80/443 | TCP | HTTP/HTTPS | {GatewayStart} | {HubNameStart}
| 80/443 | TCP | HTTP/HTTPS | {GatewayStart} | {EDAName}
| 80/443 | TCP | HTTP/HTTPS | Execution node | {GatewayStart}
| 5432 | TCP | PostgreSQL | {EDAName} | External database
| 5432 | TCP | PostgreSQL | {GatewayStart} | External database
| 5432 | TCP | PostgreSQL | {HubNameStart} | External database
| 5432 | TCP | PostgreSQL | {ControllerNameStart} | External database
| 6379 | TCP | Redis | {EDAName} | Redis node
| 6379 | TCP | Redis | {GatewayStart} | Redis node
| 8443 | TCP | HTTPS | {GatewayStart} | {GatewayStart}
| 16379 | TCP | Redis | Redis node | Redis node
| 27199 | TCP | Receptor | {ControllerNameStart} | Hop node and execution node
| 27199 | TCP | Receptor | Hop node | Execution node
//| 50051 | TCP | gRPC | {GatewayStart} | {GatewayStart}
|====

[NOTE]
====
If you change any port values by using inventory variables, refer to link:{URLInstallationGuide}/appendix-inventory-files-vars[Inventory file variables] to review all default port values and ensure there are no port conflicts.
====

== Example inventory file
Use the example inventory file to perform an installation: 

include::snippets/inventory-rpm-b-env-a.adoc[]
