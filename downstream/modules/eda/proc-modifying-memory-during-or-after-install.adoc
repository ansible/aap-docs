[id="modifying-memory-during-install"]

= Modifying the default memory limit for each rulebook activation during installation

[role="_abstract"]
Memory usage is based on the number of events that {EDAcontroller} has to process.
By default, each rulebook activation container has a 200MB memory limit.
For example, with 4 CPU and 16GB of RAM, one rulebook activation container with an assigned 200MB memory limit cannot handle more than 150,000 events per minute.
If the number of parallel running rulebook activations is higher, then the maximum number of events each rulebook activation can process is reduced.
If there are too many incoming events at a very high rate, the container can run out of memory trying to process the events.
This will kill the container, and your rulebook activation will fail with a status code of 137. 

To mitigate this status, you can modify the default memory limit for each rulebook activation _during_ or _after_ installation.

.Procedure
. Perform the following steps to modify your default memory limit for your rulebook activations _during_ installation:
.. Navigate to the setup inventory file.
.. Add `automationedacontroller_podman_mem_limit` in the [all:vars] section. For example, `automationedacontroller_podman_mem_limit='400m'`.
.. Run the setup.
. Perform the following steps to modify your default memory limit for your rulebook activations _after_ installation:
.. Navigate to the environment file at `/etc/ansible-automation-platform/eda/settings.yaml`.
.. Modify the default container memory limit. For example, `PODMAN_MEM_LIMIT = '300m'`.
.. Restart the {EDAcontroller} services using `automation-eda-controller-service restart``.
