:_mod-docs-content-type: REFERENCE

// Module included in the following assemblies: 
// downstream/assemblies/assembly-hardening-aap.adoc

[id="ref-aap-operational-secrets_{context}"]

= {PlatformNameShort} operational secrets

{PlatformNameShort} uses several secrets (passwords, keys, and so on) operationally. 
These secrets are stored unencrypted on the various {PlatformNameShort} servers, as each component service must read them at startup. 
All files are protected by Unix permissions, and restricted to the root user or the appropriate service account user. 
These files should be routinely monitored to ensure there has been no unauthorized access or modification.

== RPM-based installation secrets

The following table provides the location of these secrets for RPM-based installs of {PlatformNameShort}.

.{PlatformNameShort} operational secrets

|===
2+| *{ControllerNameStart} secrets*
| *File path* | *Description* 
| `/etc/tower/SECRET_KEY` | A secret key used for encrypting automation secrets in the database. If the `SECRET_KEY` changes or is unknown, no encrypted fields in the database will be accessible.

| `/etc/tower/tower.cert`

`/etc/tower/tower.key` | SSL certificate and key for the {ControllerName} web service. 

A self-signed `cert/key` is installed by default; you can provide a locally appropriate certificate and key. 

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/tower/conf.d/postgres.py` | Contains the password used by {ControllerName} to connect to the database, unless TLS authentication is used for the database connection.

| `/etc/tower/conf.d/channels.py` | Contains the secret used by {ControllerName} for websocket broadcasts.

| `/etc/tower/conf.d/gateway.py` | Contains the key used by {ControllerName} to sync state with the {Gateway}.

2+| *{GatewayStart} secrets*
| *File path* | *Description* 

| `/etc/ansible-automation-platform/gateway/SECRET_KEY` | A secret key used for encrypting automation secrets in the database. 
If the `SECRET_KEY changes` or is unknown, the {Gateway} cannot access the encrypted secrets in the database.

| `/etc/ansible-automation-platform/gateway/gateway.cert`  | SSL certificate for the {Gateway} web service. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used.

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/ansible-automation-platform/gateway/gateway.key` | SSL key for the {Gateway} web service. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used.

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/ansible-automation-platform/gateway/cache.cert` | SSL certificate used for mutual TLS (mTLS) authentication with the Redis cache used by the {Gateway}.

| `/etc/ansible-automation-platform/gateway/cache.key` | SSL key used for mutual TLS (mTLS) authentication with the Redis cache used by the {Gateway}.

| `/etc/ansible-automation-platform/gateway/settings.py` | Contains the password used by the {Gateway} to connect to the database, unless TLS authentication is used for the database connection. 
Also contains the password used to connect to the Redis cache used by the {Gateway}.

2+| *{HubNameStart} secrets*
| *File path* | *Description* 
| `/etc/pulp/settings.py` | Contains the password used by {HubName} to connect to the database, unless TLS authentication is used for the database connection. Contains the Django secret key used by the {HubName} web service.

| `/etc/pulp/certs/token_public_key.pem` | OpenSSL public key in PEM format for the {HubName} EE token authentication. It is generated by default from the `token_private_key.pem` file.

| `/etc/pulp/certs/token_private_key.pem` | OpenSSL private key in PEM format for the {HubName} EE token authentication. It is generated by default, although a user can provide their own private key with the `pulp_token_auth_key`` installation inventory variable.

| `/etc/pulp/certs/pulp_webserver.crt`  | SSL certificate for the {HubName} web service. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used.

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/pulp/certs/pulp_webserver.key` | SSL key for the {HubName} web service. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used.

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/pulp/certs/database_fields.symmetric.key` | A key used for encrypting sensitive fields in the {HubName} database table. 

If the key changes or is unknown, {HubName} cannot access the encrypted fields in the database.

2+| *{EDAName} secrets*
| *File path* | *Description*
| `/etc/ansible-automation-platform/eda/SECRET_KEY` | A secret key used for encrypting fields in the {EDAName} controller database table. 

If the SECRET_KEY changes or is unknown, the {EDAName} controller cannot access the encrypted fields in the database.

| `/etc/ansible-automation-platform/eda/settings.yaml` | Contains the password used by the {EDAName} gateway to connect to the database, unless TLS authentication is used for the database connection. 

Contains the password used to connect to the Redis cache used by the {EDAName} controller. 

Contains the key used by the {EDAName} controller to sync state with the {Gateway}.

| `/etc/ansible-automation-platform/eda/server.cert` | SSL certificate for the {EDAName} controller web service. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used.

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/ansible-automation-platform/eda/server.key` | SSL key for the {EDAName} controller web service. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used.

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/ansible-automation-platform/eda/cache.cert` | SSL certificate used for mutual TLS (mTLS) authentication with the Redis cache used by the {EDAName} controller

| `/etc/ansible-automation-platform/eda/cache.key` | SSL key used for mutual TLS (mTLS) authentication with the Redis cache used by the {EDAName} controller

| `/etc/ansible-automation-platform/eda/websocket.cert` |SSL certificate for the {EDAName} controller websocket endpoint. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used. 

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

| `/etc/ansible-automation-platform/eda/websocket.key` | SSL  key for the {EDAName} controller websocket endpoint. 

A self-signed certificate is installed by default, although a user-provided certificate and key pair can be used. 

For more information, see link:{URLHardening}/hardening-aap#proc-install-user-pki_hardening-aap[Installing with user-provided PKI certificates].

2+| *Redis secrets*
| *File path* | *Description*
| `/etc/ansible-automation-platform/ca/ansible-automation-platform-managed-ca-cert.crt` | SSL certificate for the internal self-signed certificate authority used by the {Installer} to generate the default self-signed certificates for each component service.

| `/etc/ansible-automation-platform/ca/ansible-automation-platform-managed-ca-cert.key` | SSL  key for the internal self-signed certificate authority used by the {Installer} to generate the default self-signed certificates for each component service.
|===

[NOTE]
====
Some of these file locations reflect the previous product name of {ControllerName}, formerly named Ansible Tower.
====

== Container-based installation secrets

The secrets listed for RPM-based installations are also used in container-based installations, but they are stored in a different manner. 
Container-based installations of {PlatformName} use Podman secrets to store operational secrets. 
These secrets can be listed using the `podman secret list` command.

By default, Podman stores data in the home directory of the user who installed and runs the containerized {PlatformName} services. 
Podman secrets are stored in the file `$HOME/.local/share/containers/storage/secrets/filedriver/secretsdata.json` as base64-encoded strings, so while they are not in plain text the values are only obfuscated. 

The data stored in a Podman secret can be shown using the command `podman secret inspect --showsecret <secret>`. 

This file should be routinely monitored to ensure there has been no unauthorized access or modification.



