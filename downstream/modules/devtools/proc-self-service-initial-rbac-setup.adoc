:_mod-docs-content-type: PROCEDURE

[id="self-service-initial-rbac-setup_{context}"]
= Setting up initial RBAC rules in {SelfServiceShort}

[role="_abstract"]
After you install {SelfServiceShort} and synchronize it with {PlatformNameShort},
only users with admin privileges can view the auto-generated templates.

You must configure initial Role-Based Access Control (RBAC) in the {SelfServiceShort}. 
This configuration is mandatory for all users; without it, the {PlatformNameShortS} admin cannot view templates.

.Prerequisites

* You have credentials for an {PlatformNameShort} account that has admin privileges.
* Synchronization of users, groups, and teams from {PlatformNameShort} is complete.
* The *Allow external users to create OAuth2 tokens* setting is enabled in the {MenuSetGateway} settings in {PlatformNameShort}.

.Procedure

. Log in to {SelfServiceShort} with an account that has admin privileges.
. In the navigation pane of {SelfServiceShort}, select Administration > RBAC. 
. Click btn:[Create] to create a new role.
. In the *Create Role* section, enter a name for the new role, for example
`auto-generated-templates-role`, then click btn:[Next].
+
image::self-service-create-new-rbac-role.png[Create new role]
. In the *Users and Groups* section,
select the {PlatformNameShort} teams and users to assign to this role, then click btn:[Next].
+
You can only select teams and users from the Organization that you are using in {SelfServiceShort}.
. In the *Add permission policies* section,
select the *Catalog* and *Scaffolder* plugins from the *Select plugins* dropdown menu.
The selected plug-ins are added to a list.
+
image::self-service-add-permission-policies.png[Add permission policies]
. Click *Select* to expand *Catalog* and *Scaffolder* in the list of plug-ins.
. To allow users to view templates and execute jobs in {PlatformNameShort},
grant the following minimum permissions for the selected plug-ins by selecting the check box to the left of the permission names.
** Catalog permissions:
*** `catalog.entity.read`
** Scaffolder permissions:
*** `scaffolder.template.parameter.read`
*** `scaffolder.template.step.read`
*** `scaffolder.action.execute`
*** `scaffolder.task.cancel`
*** `scaffolder.task.create`
*** `scaffolder.task.read`
+
[NOTE]
====
The `scaffolder.task.read` permission must be enabled so that users can view previous task runs in the *History* page in the {SelfServiceShort} console.
====
. Click btn:[Next] to review your settings, then btn:[Create] to create the new role. 
+
On successful completion, your new role is included in the *All roles* list when you select
menu:Administration[RBAC] in the navigation pane in {SelfServiceShort}.

.Verification

* Log in to {SelfServiceShort} as a non-admin user who is a member of a team you granted permissions to.
Confirm that the user can see auto-generated templates in {SelfServiceShort}.
These correspond to the {PlatformNameShort} job templates that the user has *Execute* permissions for. To learn more about configuring RBAC in {PlatformNameShort}, see the link:https://interact.redhat.com/share/RZM69zpDpc5ymd63pMQv[{SelfServiceShort} interactive demo].
