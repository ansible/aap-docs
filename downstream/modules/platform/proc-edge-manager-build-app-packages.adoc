:_mod-docs-content-type: PROCEDURE

[id="edge-manager-build-app-packages"]

= Building an application package image

[role="_abstract"]

The {RedHatEdge} can download application packages from an Open Container Initiative (OCI) compatible registry. 
You can build an OCI container image that includes your application package in the `podman-compose` format and push the image to your OCI registry.

.Prerequisites

* You must install the {RedHatEdge} CLI.
* You must log in to the {RedHatEdge} service.
* Your device must run an operating system image with the `podman-compose` tool installed. 

.Procedure

. Define the functionality of the application in a file called `podman-compose.yaml` that follows the Podman Compose specification:

** Create a file called `Containerfile` with the following content:
+
[source,bash]
----
FROM scratch
COPY podman-compose.yaml /podman-compose.yaml
LABEL appType="compose"
----
+
// --- Explanations using Definition List ---

FROM scratch::
  Embeds the compose file in a `scratch` container.

LABEL appType="compose"::
  Adds the `appType=compose` label.

. Build and push the container image to your OCI registry:

.. Define the image repository that you have permissions to write to by running the following command:
+
[source,bash]
----
OCI_IMAGE_REPO=quai.io/<your_org>/<your_image>
----

.. Define the image tag by running the following command:
+
[source,bash]
----
OCI_IMAGE_TAG=v1
----

.. Build the application container image by running the following command:
+
[source,bash]
----
podman build -t ${OCI_IMAGE_REPO}:${OCI_IMAGE_TAG} .
----

.. Push the container image by running the following command:
+
[source,bash]
----
podman push ${OCI_IMAGE_REPO}:${OCI_IMAGE_TAG} .
----
