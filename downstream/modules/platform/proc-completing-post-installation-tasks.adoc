[id="completing-post-installation-tasks_{context}"]

= Completing Post Installation Tasks

== Adding an {ControllerName} Subscription

.Procedure

. Navigate to the FQDN of the {ControllerNameStart}. Login with admin and the password you specified as `admin_password` in your inventory file.

. Click btn:[Browse] and select the __manifest.zip__ you created earlier.

. Click btn:[Next].

. Uncheck btn:[User analytics] and btn:[Automation analytics]. These rely on an Internet connection and should be turned off.

. Click btn:[Next].

. Read the End User License Agreement and click btn:[Submit] if you agree.

== Updating the CA trust store

=== Self-Signed Certificates

By default, {HubName} and {ControllerName} are installed using self signed certificates. This creates an issue where {ControllerName} does not trust {HubName}’s certificate and does not download the {ExecEnvShort}s from {HubName}. The solution is to import {HubName}’s CA cert as a trusted cert on {ControllerName}. You can use SCP or directly copy and paste from one file into another to perform this action. The following steps are copied from a KB article found at https://access.redhat.com/solutions/6707451.

=== Copying the root certificate on the private {HubName} to the {ControllerName} using secure copy (SCP)

If SSH is available as the root user between {ControllerName} and {PrivateHubName}, use SCP to copy the root certificate on {PrivateHubName} to {ControllerName} and run `update-ca-trust` on {ControllerName} to update the CA trust store.

On the {ControllerNameStart}
----
$ sudo -i
# scp <hub_fqdn>:/etc/pulp/certs/root.crt
/etc/pki/ca-trust/source/anchors/automationhub-root.crt
# update-ca-trust
----

=== Copying and Pasting

If SSH is unavailable as root between {PrivateHubName} and {ControllerName}, copy the contents of the file __/etc/pulp/certs/root.crt__ on {PrivateHubName} and paste it into a new file on {ControllerName} called __/etc/pki/ca-trust/source/anchors/automationhub-root.crt__. After the new file is created, run the command `update-ca-trust` to update the CA trust store with the new certificate.

On the {PrivateHubNameStart}
----
$ sudo -i
# cat /etc/pulp/certs/root.crt
(copy the contents of the file, including the lines with 'BEGIN CERTIFICATE' and
'END CERTIFICATE')
----

On {ControllerName}
----
$ sudo -i
# vi /etc/pki/ca-trust/source/anchors/automationhub-root.crt
(paste the contents of the root.crt file from the private automation hub into the new file and write to disk)
# update-ca-trust
----
