:_newdoc-version: 2.18.3
:_template-generated: 2024-10-09
:_mod-docs-content-type: PROCEDURE

[id="upgrade-remove-and-add-eda_{context}"]
= Removing {EDAName} 2.4 and adding {EDAName} 2.5

{PlatformNameShort} {PlatformVers} supports upgrades from {PlatformNameShort} 2.4 environments for all components, except for {EDAName}. Database migrations between {EDAName} 2.4 and {EDAName} 2.5 are not compatible. Therefore, you must first upgrade the 2.4 services (using the inventory file to specify {ControllerName} and {HubName} VMs only) to get them to the initial version of {PlatformNameShort} {PlatformVers}.

After all the services are at the same version, you must remove the {EDAName} 2.4 database, then add {EDAName} 2.5 and run the installer once again. After the installation is completed, reconnect {MenuAD} ({EDAcontroller}) to {MenuTopAE} ({ControllerName}) to run rulebook activations. 

.Procedure
. Shut down the old {EDAName} 2.4 host.
. Remove the Event-Driven Ansible 2.4 database by performing the following steps:
.. Log in to your database host with a user that has superuser privileges.
+
`# psql -h <hostname> -U <username>`
.. When prompted, enter your password.
.. Delete the existing database by using the following command:
+
`DROP DATABASE automationedacontroller`
.. Create a new database by using the following command:
+
`CREATE DATABASE automationedacontroller OWNER <username>`
+
[NOTE]
====
If you are using a managed database, you are not required to create a new database.
====
.. When prompted, reenter your password.
. Add the {EDAName} 2.5 host in the inventory file as an `[automationedacontroller]` group:
+
----
[automationcontroller]
<The new Event-Driven Ansible 2.5 host>
----
. In the same inventory file, add the following {EDAName} variables in the inventory file under the `[all:vars]` section:
+
----
[all:vars]
automationedacontroller_admin_password='<eda-password>'
automationedacontroller_pg_host=<Your existing database host>
automationedacontroller_pg_password='<password>'
----

. After updating the inventory file, rerun the installer using the `setup.sh` script:
+
`$ ./setup.sh`
. After the installation is completed, reconnect {MenuAD} ({EDAcontroller}) to {MenuTopAE} ({ControllerName}) to run rulebook activations successfully. 

.Additional resources

* link:https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/using_automation_decisions/eda-set-up-rhaap-credential-type[{PlatformName} credential] in the _{TitleEDAUserGuide} guide_.