[id="ha-hub-installation"]

= Installing a high availability automation hub

Configure the {PlatformNameShort} installer to install {HubName} in a highly available (HA) configuration. Install HA {HubName} on SELinux by creating mount points and adding the appropriate SELinux contexts to your {PlatformNameShort} environment.

== Highly available {HubName} installation

Use this example to populate the inventory file to install a highly available {HubName}. This inventory file includes a highly available {HubName} with a clustered setup and implements Red Hat Single Sign-On in your environment. 

.Specify database host IP

Specify the IP address for your database host, using the `automation_pg_host` and `automation_pg_port` inventory variables. For example:

-----
automationhub_pg_host='192.0.2.10'
automationhub_pg_port='5432'
-----

also specify the IP address for your database host in the [database] section, using the value in the `automationhub_pg_host` inventory variable:
-----
[database]
192.0.2.10
-----

.List all instances in a clustered setup
If installing a clustered setup, replace `localhost ansible_connection=local` in the [automationhub] section with the hostname or IP of all instances. For example:
-----
[automationhub]
automationhub1.testing.ansible.com ansible_user=cloud-user ansible_host=192.0.2.18
automationhub2.testing.ansible.com ansible_user=cloud-user ansible_host=192.0.2.20
automationhub3.testing.ansible.com ansible_user=cloud-user ansible_host=192.0.2.22
-----

.Next steps
Check to ensure the directives below are present in ``/etc/pulp/settings.py`` in each of the Private Automation Hub servers:
----
USE_X_FORWARDED_PORT = True
USE_X_FORWARDED_HOST = True 
----
[NOTE]
If `automationhub_main_url` is not specified, the first node in the [automationhub] group will be used as default.
