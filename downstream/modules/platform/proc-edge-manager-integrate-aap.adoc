:_mod-docs-content-type: PROCEDURE

[id="edge-manager-integrate-aap"]

= Integrating with {PlatformNameShort}

[role="_abstract"]

Integrate the {RedHatEdge} with your {PlatformNameShort} instance by modifying the `service-config.yaml` file to include authentication type, API URLs, OAuth client ID, and an optional OAuth token, followed by restarting the services.

.Procedure

. Stop the flightctl services before editing your `service-config.yaml` file:
+
[literal, options="nowrap" subs="+attributes"]
----
sudo systemctl stop flightctl.target
----
+
. Configure the integration settings by editing the configuration file:
+
[literal, options="nowrap" subs="+attributes"]
----
sudo vi /etc/flightctl/service-config.yaml
----
+
. Update the configuration file to integrate with {PlatformNameShort}:
+
[source,yaml]
----
global:
  baseDomain: <your-edge-manager-ip-or-domain>
  auth:
    type: aap
    insecureSkipTlsVerify: false
    aap:
      apiUrl: https://your-aap-instance.example.com
      externalApiUrl: https://your-aap-instance.example.com
      oAuthApplicationClientId: <client-id-from-oauth-app>
      oAuthToken: <your-oauth-token>
----
+
// --- Explanations below (using definition list) ---

baseDomain::
  The domain name or IP for the host. This is the only mandatory field.
type::
  Set this to `aap` to enable {PlatformNameShort} authentication.
insecureSkipTlsVerify::
  Set to `false`. Only set this to `true` to skip TLS certificate verification for the {PlatformNameShort} URLs. For production environments, consider configuring a CA certificate (see the Self-signed certificates section).
apiUrl::
  The internal facing API URL for the running {PlatformNameShort} instance that makes requests against.
externalApiUrl::
  The externally accessible URL of your running {PlatformNameShort} instance.
oAuthApplicationClientId::
  This is the Client ID of the OAuth application configured in {PlatformNameShort} for the {RedHatEdge}. This is not necessary if you are using the automatic method.
oAuthToken::
  This is an OAuth token with write permissions for the "Default" organization. This is only needed if you want the setup process to automatically create the OAuth application. This is not necessary if you are using the manual method.

+
. Start the services:
+
[literal, options="nowrap" subs="+attributes"]
----
sudo systemctl start flightctl.target
----
