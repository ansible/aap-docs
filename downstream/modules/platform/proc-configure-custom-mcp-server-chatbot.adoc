:_mod-docs-content-type: PROCEDURE

[id="proc-configure-custom-mcp-server"]

= Configuring a custom MCP server

Configure a Model Context Protocol (MCP) server that interfaces with the {AAPchatbot}, so that the large language model (LLM) uses the assistant to generate answers to your questions.

MCP is an open protocol that standardizes how applications provide context to LLMs. Using the protocol, an MCP server provides a standardized way for an LLM to increase context by requesting and receiving real-time information from external resources. The integration with an MCP server enables the {AAPchatbot} to offer an enhanced user experience by delivering relevant, dynamically sourced data results to your queries. 

[NOTE]
====
{AAPchatbot} integration with the Model Context Protocol (MCP) server is available as a Technology Preview release. This integration enhances the user experience by delivering relevant, dynamically sourced data results to your queries. 

Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process. For more information about the support scope of Red Hat Technology Preview features, see link:https://access.redhat.com/support/offerings/techpreview/[Technology Preview Features Support Scope].
====

.Prerequisites
* link:https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html-single/installing_on_openshift_container_platform/index#proc-install-operator-chatbot[You have installed and configured the {PlatformNameShort} operator].

.Procedure
. Log in to {OCP} as an administrator.
. Navigate to menu:Workloads[Secrets].
. From the *Projects* list, select the namespace that you created when you installed the {PlatformNameShort} operator.
. Locate the chatbot configuration secret that you created to connect to the {PlatformNameShort}. For example, `chatbot-configuration-secret`. 
. Click *Edit* and add the following keys and their associated values individually: 
+
[%header,cols="25%,75%"]
|====
| Key 
| Value

a|
* `aap_gateway_url`
* `aap_controller_url`

a|

These URLs are internal URLs accessible to the {Gateway} and {ControllerName} services on the OpenShift cluster. 

For instance, if the name of your {PlatformNameShort} custom resource is `myaap`, these URLs will be:

* `aap_gateway_url`: `\http://myaap`
* `aap_controller_url`: `\http://myaap-controller-service`

Use one of the following options to configure an MCP server:

* Configure an MCP server for the Ansible Lightspeed Service:
+
Specify the `aap_gateway_url` parameter only. Authentication will attempt to use the JSON Web Token (JWT) token associated with the user's authenticated context.

* Configure an MCP server for both the Ansible Lightspeed Service and the {ControllerName}:
+
Specify both parameters `aap_gateway_url` and `aap_controller_url`, so that the Ansible Lightspeed Service MCP server and {PlatformNameShort} Controller Service MCP server are both configured. Authentication will attempt to use  the JWT token associated with the user's authenticated context.

[NOTE]
====
If you do not specify any parameter, no MCP server is provisioned or registered with the underlying LLM's tool at runtime. 
====
|====

. Click *Create*. The chatbot authorization secret is updated.



