<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Event-Driven Ansible controller user guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article Role ARG Spec">
<div id="header">
<h1>Event-Driven Ansible controller user guide</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Event-Driven Ansible controller is a new way to enhance and expand automation by improving IT speed and agility while enabling consistency and resilience.
Developed by Red Hat, this feature is designed for simplicity and flexibility.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="making-open-source-more-inclusive">Making open source more inclusive</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat is committed to replacing problematic language in our code, documentation, and web properties.
We are beginning with these four terms: master, slave, blacklist, and whitelist.
Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases.
For more details, see <a href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright&#8217;s message</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="providing-feedback">Providing feedback on Red Hat documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have a suggestion to improve this documentation, or find an error, please contact technical support at <a href="https://access.redhat.com">https://access.redhat.com</a> to create an issue on the Ansible Automation Platform Jira project using the <strong>docs-product</strong> component.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eda-user-guide-overview">1. Event-Driven Ansible controller overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Event-Driven Ansible is a highly scalable, flexible automation capability that works with event sources such as other software vendors' monitoring tools.
These tools monitor IT solutions and identify events and automatically implement the documented changes or response in a rulebook to handle that event.</p>
</div>
<div class="paragraph">
<p>The following procedures form the user configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#eda-set-up-credential">Setting up credentials</a></p>
</li>
<li>
<p><a href="#eda-set-up-new-project">Setting up a new project</a></p>
</li>
<li>
<p><a href="#eda-set-up-new-decision-environment">Setting up a new decision environment</a></p>
</li>
<li>
<p><a href="#eda-set-up-token">Setting up a token to authenticate to Ansible Automation Platform Controller</a></p>
</li>
<li>
<p><a href="#eda-set-up-rulebook-activation">Setting up a rulebook activation</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eda-credentials">2. Setting up credentials for Event-Driven Ansible controller</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Credentials are used by Event-Driven Ansible for authentication when launching rulebooks.</p>
</div>
<div class="sect2">
<h3 id="eda-set-up-credential">2.1. Setting up credentials</h3>
<div class="paragraph">
<p>Create a credential to use with a private repository (GitHub or GitLab) or a private container registry.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you are using a GitHub or GitLab repository, use the <code>basic auth</code> method.
Both SCM servers are officially supported.
You can use any SCM provider that supports <code>basic auth</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the Ansible Automation Platform Dashboard.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Access Management</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Credentials</b></span></strong>.</p>
</li>
<li>
<p>Click <b class="button">Create credential</b>.</p>
</li>
<li>
<p>Insert the following:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Insert the name.</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This field is optional.</p>
</dd>
<dt class="hdlist1">Credential type</dt>
<dd>
<p>The options available are a GitHub personal access token, a GitLab personal access token, or a container registry.</p>
</dd>
<dt class="hdlist1">Username</dt>
<dd>
<p>Insert the username.</p>
</dd>
<dt class="hdlist1">Token</dt>
<dd>
<p>Insert a token that allows you to authenticate to your destination.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you are using a container registry, the token field can be a token or a password, depending on the registry provider.
If you are using the Ansible Automation Platform hub registry, insert the password for that in the token field.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>Click <b class="button">Create credential</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After saving the credential, the credentials details page is displayed.
From there or the <strong>Credentials</strong> list view, you can edit or delete it.</p>
</div>
</div>
<div class="sect2">
<h3 id="eda-credentials-list-view">2.2. Credentials list view</h3>
<div class="paragraph">
<p>On the <strong>Credentials</strong> page, you can view the list of created credentials that you have created along with the <strong>Type</strong> of credential.</p>
</div>
<div class="paragraph">
<p>From the menu bar, you can search for credentials in the <strong>Name</strong> field.</p>
</div>
<div class="paragraph">
<p>You also have the following options in the menu bar:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Choose which columns are shown in the list view by clicking <b class="button">Manage columns</b>.</p>
</li>
<li>
<p>Choose between a <b class="button">List view</b> or a <b class="button">Card view</b>, by clicking the icons.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="eda-edit-credential">2.3. Editing a credential</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the credential by using one of these methods:</p>
<div class="ulist">
<ul>
<li>
<p>From the <strong>Credentials</strong> list view, click the <b class="button">Edit credential</b> icon next to the desired credential.</p>
</li>
<li>
<p>From the <strong>Credentials</strong> list view, select the name of the credential, click <b class="button">Edit credential</b>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Edit the appropriate details and click <b class="button">Save credential</b>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="eda-delete-credential">2.4. Deleting a credential</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Delete the credential by using one of these methods:</p>
<div class="ulist">
<ul>
<li>
<p>From the <strong>Credentials</strong> list view, click the <b class="button">More Actions</b> icon <strong>&#8942;</strong> next to the desired credential and click <b class="button">Delete credential</b>.</p>
</li>
<li>
<p>From the <strong>Credentials</strong> list view, select the name of the credential, click the <b class="button">More Actions</b> icon <strong>&#8942;</strong> next to <b class="button">Edit credential</b>, and click <b class="button">Delete credential</b>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the pop-up window, select <strong>Yes, I confirm that I want to delete this credential</strong>.</p>
</li>
<li>
<p>Click <b class="button">Delete credential</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can delete multiple credentials at a time by selecting the checkbox next to each credential and clicking the <b class="button">More Actions</b> icon <strong>&#8942;</strong> in the menu bar and then clicking <b class="button">Delete selected credentials</b>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eda-projects">3. Projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Projects are a logical collection of rulebooks.
They must be a git repository and only http protocol is supported.
The rulebooks of a project must be located in the path defined for Event-Driven Ansible content in Ansible collections: <code>/extensions/eda/rulebooks</code> at the root of the project.</p>
</div>
<div class="sect2">
<h3 id="eda-set-up-new-project">3.1. Setting up a new project</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are logged in to the Event-Driven Ansible controller Dashboard as a Content Consumer.</p>
</li>
<li>
<p>You have set up a credential, if necessary.
For more information, see the <a href="#eda-set-up-credential">Setting up credentials</a> section.</p>
</li>
<li>
<p>You have an existing repository containing rulebooks that are integrated with playbooks contained in a repository to be used by automation controller.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the Event-Driven Ansible controller Dashboard.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Automation Decisions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Projects</b></span></strong>.</p>
</li>
<li>
<p>Insert the following:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Enter project name.</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This field is optional.</p>
</dd>
<dt class="hdlist1">SCM type</dt>
<dd>
<p>Git is the only SCM type available for use.</p>
</dd>
<dt class="hdlist1">SCM URL</dt>
<dd>
<p>HTTP[S] protocol address of a repository, such as GitHub or GitLab.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot edit the SCM URL after you create the project.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Credential</dt>
<dd>
<p>This field is optional. This is the token needed to utilize the SCM URL.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Select <b class="button">Create project</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your project is now created and can be managed in the <strong>Projects</strong> screen.</p>
</div>
<div class="paragraph">
<p>After saving the new project, the project&#8217;s details page is displayed.
From there or the <strong>Projects</strong> list view, you can edit or delete it.</p>
</div>
</div>
<div class="sect2">
<h3 id="eda-projects-list-view">3.2. Projects list view</h3>
<div class="paragraph">
<p>On the <strong>Projects</strong> page, you can view the projects that you have created along with the <strong>Status</strong> and the <strong>Git hash</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If a rulebook changes in source control you can re-sync a project by selecting the sync icon next to the project from the <strong>Projects</strong> list view.
The <strong>Git hash</strong> updates represent the latest commit on that repository.
An activation must be restarted or recreated if you want to use the updated project.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="eda-editing-a-project">3.3. Editing a project</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the <strong>Projects</strong> list view, select the <b class="button">More Actions</b> icon <strong>&#8942;</strong> next to the desired project.</p>
</li>
<li>
<p>Select <b class="button">Edit project</b>.</p>
</li>
<li>
<p>Enter the required changes and select <b class="button">Save project</b>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eda-edit-project.png" alt="Edit project">
</div>
</div>
</div>
<div class="sect2">
<h3 id="eda-delete-project">3.4. Deleting a project</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the <strong>Projects</strong> list view, select the <b class="button">More Actions</b> icon <strong>&#8942;</strong> next to the desired project.</p>
</li>
<li>
<p>Select <b class="button">Delete project</b>.</p>
</li>
<li>
<p>In the popup window, select <b class="button">Yes, I confirm that I want to delete this project</b>.</p>
</li>
<li>
<p>Select <b class="button">Delete project</b>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eda-decision-environments">4. Decision environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Decision environments are a container image to run Ansible rulebooks.
They create a common language for communicating automation dependencies, and provide a standard way to build and distribute the automation environment.
The default decision environment is found in the <a href="https://quay.io/repository/ansible/ansible-rulebook">Ansible-Rulebook</a>.</p>
</div>
<div class="paragraph">
<p>To create your own decision environment refer to <a href="#eda-build-a-custom-decision-environment">Building a custom decision environment for Event-Driven Ansible within Ansible Automation Platform</a>.</p>
</div>
<div class="sect2">
<h3 id="eda-set-up-new-decision-environment">4.1. Setting up a new decision environment</h3>
<div class="paragraph">
<p>The following steps describe how to import a decision environment into your Event-Driven Ansible controller Dashboard.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are logged in to the Event-Driven Ansible controller Dashboard as a Content Consumer.</p>
</li>
<li>
<p>You have set up a credential, if necessary.
For more information, see the <a href="#eda-set-up-credential">Setting up credentials</a> section.</p>
</li>
<li>
<p>You have pushed a decision environment image to an image repository or you chose to use the image <code>de-supported</code> provided at <a href="http://registry.redhat.io/">registry.redhat.io</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the Event-Driven Ansible controller Dashboard.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Automation Decisions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Decision Environments</b></span></strong>.</p>
</li>
<li>
<p>Insert the following:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Insert the name.</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This field is optional.</p>
</dd>
<dt class="hdlist1">Image</dt>
<dd>
<p>This is the full image location, including the container registry, image name, and version tag.</p>
</dd>
<dt class="hdlist1">Credential</dt>
<dd>
<p>This field is optional. This is the token needed to utilize the decision environment image.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Select <b class="button">Create decision environment</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your decision environment is now created and can be managed on the <strong>Decision Environments</strong> screen.</p>
</div>
<div class="paragraph">
<p>After saving the new decision environment, the decision environment&#8217;s details page is displayed.
From there or the <strong>Decision Environments</strong> list view, you can edit or delete it.</p>
</div>
</div>
<div class="sect2">
<h3 id="eda-build-a-custom-decision-environment">4.2. Building a custom decision environment for Event-Driven Ansible within Ansible Automation Platform</h3>
<div class="paragraph">
<p>Refer to this section if you need a custom decision environment to provide a custom maintained or third-party event source plugin that is not available in the default decision environment.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ansible Automation Platform &gt; = 2.4</p>
</li>
<li>
<p>Event-Driven Ansible</p>
</li>
<li>
<p>Ansible Builder &gt; = 3.0</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Add the <code>de-supported</code> decision environment. This image is built from a base image provided by Red Hat called <code>de-minimal</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Red Hat recommends using de-minimal as the base image with Ansible Builder to build your custom decision environments.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example of the Ansible builder definition file using de-minimal as a base image to build a custom decision environment with the ansible.eda collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>version: 3

images:
  base_image:
    name: 'registry.redhat.io/ansible-automation-platform-24/de-minimal-rhel8:latest'

dependencies:
  galaxy:
    collections:
      - ansible.eda
  python_interpreter:
    package_system: "python39"

options:
  package_manager_path: /usr/bin/microdnf</pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, if other python packages or RPM are needed, you can add the following to a single definition file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>version: 3

images:
  base_image:
    name: 'registry.redhat.io/ansible-automation-platform-24/de-minimal-rhel8:latest'

dependencies:
  galaxy:
    collections:
      - ansible.eda
  python:
    - six
    - psutil
  system:
    - iputils [platform:rpm]
  python_interpreter:
    package_system: "python39"

options:
  package_manager_path: /usr/bin/microdnf</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eda-set-up-token">5. Setting up an automation controller token</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Automation controller must contain a project based on a repository with certain playbooks designed to work with the Event-Driven Ansible rulebooks.
Automation controller must also have corresponding job templates set up based on the playbooks in that project.</p>
</div>
<div class="sect2">
<h3 id="eda-set-up-token-to-authenticate">5.1. Setting up a token to authenticate to Ansible Automation Platform Controller</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are logged in to the Event-Driven Ansible controller Dashboard as a Content Consumer.</p>
</li>
<li>
<p>You have created a user.</p>
</li>
<li>
<p>You can log in to the Event-Driven Ansible controller Dashboard or you are added as a user in the organization.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the Event-Driven Ansible controller Dashboard.</p>
</li>
<li>
<p>From the top navigation panel, select your profile.</p>
</li>
<li>
<p>Go to <strong>User details</strong>.</p>
</li>
<li>
<p>Select <span class="menuseq"><b class="menu">Controller Tokens</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Create controller token</b></span>.</p>
</li>
<li>
<p>Insert the following:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Insert the name.</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This field is optional.</p>
</dd>
<dt class="hdlist1">Token</dt>
<dd>
<p>Create the token in automation controller.
For more information on creating the token, refer to the <a href="https://docs.ansible.com/automation-controller/latest/html/userguide/users.html#users-tokens">Users - Tokens</a> section of the Automation controller User Guide.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The token must be in write-scope.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>Select <b class="button">Create controller token</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After saving the new token, you are brought to the <strong>Controller Tokens</strong> tab where you can delete the token.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eda-rulebook-activations">6. Rulebook activations</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>A rulebook activation is a process running in the background defined by a decision environment executing a specific rulebook.</p>
</div>
<div class="sect2">
<h3 id="eda-set-up-rulebook-activation">6.1. Setting up a rulebook activation</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are logged in to the Event-Driven Ansible controller Dashboard as a Content Consumer.</p>
</li>
<li>
<p>You have set up a project.</p>
</li>
<li>
<p>You have set up a decision environment.</p>
</li>
<li>
<p>You have set up an automation controller token.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the Event-Driven Ansible controller Dashboard.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Automation Decisions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Rulebook Activations</b></span></strong>.</p>
</li>
<li>
<p>Insert the following:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Insert the name.</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This field is optional.</p>
</dd>
<dt class="hdlist1">Project</dt>
<dd>
<p>Projects are a logical collection of rulebooks.</p>
</dd>
<dt class="hdlist1">Rulebook</dt>
<dd>
<p>Rulebooks are shown according to the project selected.</p>
</dd>
<dt class="hdlist1">Decision environment</dt>
<dd>
<p>Decision environments are a container image to run Ansible rulebooks.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In Event-Driven Ansible controller, you cannot customize the pull policy of the decision environment.
By default, it follows the behavior of the <strong>always</strong> policy.
Every time an activation is started, the system tries to pull the most recent version of the image.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Restart policy</dt>
<dd>
<p>This is a policy to decide when to restart a rulebook.</p>
<div class="ulist">
<ul>
<li>
<p>Policies:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Always: Restarts when a rulebook finishes</p>
</li>
<li>
<p>Never: Never restarts a rulebook when it finishes</p>
</li>
<li>
<p>On failure: Only restarts when it fails</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Rulebook activation enabled?</dt>
<dd>
<p>This automatically enables the rulebook activation to run.</p>
</dd>
<dt class="hdlist1">Variables</dt>
<dd>
<p>The variables for the rulebook are in a JSON/YAML format.
The content would be equivalent to the file passed through the <code>--vars</code> flag of ansible-rulebook command.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Click <b class="button">Create rulebook activation</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your rulebook activation is now created and can be managed in the <strong>Rulebook Activations</strong> screen.</p>
</div>
<div class="paragraph">
<p>After saving the new rulebook activation, the rulebook activation&#8217;s details page is displayed.
From there or the <strong>Rulebook Activations</strong> list view you can edit or delete it.</p>
</div>
</div>
<div class="sect2">
<h3 id="eda-rulebook-activation-list-view">6.2. Rulebook activation list view</h3>
<div class="paragraph">
<p>On the <strong>Rulebook Activations</strong> page, you can view the rulebook activations that you have created along with the <strong>Activation status</strong>, <strong>Number of rules associated</strong> with the rulebook, the <strong>Fire count</strong>, and <strong>Restart count</strong>.</p>
</div>
<div class="paragraph">
<p>If the <strong>Activation Status</strong> is <strong>Running</strong>, it means that the rulebook activation is running in the background and executing the required actions according to the rules declared in the rulebook.</p>
</div>
<div class="paragraph">
<p>You can view more details by selecting the activation from the <strong>Rulebook Activations</strong> list view.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eda-rulebook-activations-list-view.png" alt="Rulebook activation][width=25px">
</div>
</div>
<div class="paragraph">
<p>For all activations that have run, you can view the <strong>Details</strong> and <strong>History</strong> tabs to get more information about what happened.</p>
</div>
<div class="sect3">
<h4 id="eda-view-activations-output">6.2.1. Viewing activation output</h4>
<div class="paragraph">
<p>You can view the output of the activations in the <strong>History</strong> tab.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Select the <strong>History</strong> tab to access the list of all the activation instances.
An activation instance represents a single execution of the activation.</p>
</li>
<li>
<p>Then select the activation instance in question, this will show you the <strong>Output</strong> produced by that specific execution.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eda-rulebook-activation-history.png" alt="Rulebook activation history">
</div>
</div>
<div class="paragraph">
<p>To view events that came in and triggered an action, you can use the <a href="#eda-rule-audit">Rule Audit</a> section in the Event-Driven Ansible controller Dashboard.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eda-enable-rulebook-activations">6.3. Enabling and disabling rulebook activations</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the switch on the row level to enable or disable your chosen rulebook.</p>
</li>
<li>
<p>In the popup window, select <b class="button">Yes, I confirm that I want to enable/disable these X rulebook activations</b>.</p>
</li>
<li>
<p>Select <b class="button">Enable/Disable rulebook activation</b>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="eda-restart-rulebook-activations">6.4. Restarting rulebook activations</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can only restart a rulebook activation if it is currently enabled and the restart policy was set to <strong>Always</strong> when it was created.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the <b class="button">More Actions</b> icon <strong>&#8942;</strong> next to <strong>Rulebook Activation enabled/disabled</strong> toggle.</p>
</li>
<li>
<p>Select <b class="button">Restart rulebook activation</b>.</p>
</li>
<li>
<p>In the popup window, select <b class="button">Yes, I confirm that I want to restart these X rulebook activations</b>.</p>
</li>
<li>
<p>Select <b class="button">Restart rulebook activations</b>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="eda-delete-rulebook-activations">6.5. Deleting rulebook activations</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the <b class="button">More Actions</b> icon <strong>&#8942;</strong> next to the <strong>Rulebook Activation enabled/disabled</strong> toggle.</p>
</li>
<li>
<p>Select <b class="button">Delete rulebook activation</b>.</p>
</li>
<li>
<p>In the popup window, select <b class="button">Yes, I confirm that I want to delete these X rulebook activations</b>.</p>
</li>
<li>
<p>Select <b class="button">Delete rulebook activations</b>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="eda-activate-webhook">6.6. Activating webhook rulebooks</h3>
<div class="paragraph">
<p>In Openshift environments, you can allow webhooks to reach an activation-job-pod over a given port by creating a Route that exposes that rulebook activation&#8217;s Kubernetes service.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a rulebook activation in the Event-Driven Ansible controller Dashboard.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The following is an example of rulebook with a given webhook:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>- name: Listen for storage-monitor events
  hosts: all
  sources:
    - ansible.eda.webhook:
        host: 0.0.0.0
        port: 5000
  rules:
    - name: Rule - Print event information
    condition: event.meta.headers is defined
    action:
      run_job_template:
        name: StorageRemediation
        organization: Default
        job_args:
          extra_vars:
             message: from eda
             sleep: 1</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a Route (on OpenShift Container Platform) to expose the service.
The following is an example Route for an ansible-rulebook source that expects POST&#8217;s on port 5000 on the decision environment pod:</p>
<div class="listingblock">
<div class="content">
<pre>kind: Route
apiVersion: route.openshift.io/v1
metadata:
  name: test-sync-bug
  namespace: dynatrace
  labels:
    app: eda
    job-name: activation-job-1-5000
spec:
  host: test-sync-bug-dynatrace.apps.aap-dt.ocp4.testing.ansible.com
  to:
    kind: Service
    name: activation-job-1-5000
    weight: 100
  port:
    targetPort: 5000
  tls:
    termination: edge
    insecureEdgeTerminationPolicy: Redirect
  wildcardPolicy: None</pre>
</div>
</div>
</li>
<li>
<p>When you create the Route, test it with a <strong>Post to the Route URL</strong>:</p>
<div class="listingblock">
<div class="content">
<pre>curl -H "Content-Type: application/json" -X POST
test-sync-bug-dynatrace.apps.aap-dt.ocp4.testing.ansible.com -d
'{}'</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You do not need the port as it is specified on the Route (targetPort).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="eda-test-with-K8s">6.7. Testing with Kubernetes</h3>
<div class="paragraph">
<p>With Kubernetes you can create an Ingress, or expose the port, but not for production.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the following command to expose the port on the cluster for a given service:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl port-forward svc/&lt;ACTIVATION_SVC_NAME&gt; 5000:5000</pre>
</div>
</div>
</li>
<li>
<p>Make the HTTP requests against the <code>localhost:5000</code> to trigger the rulebook:</p>
<div class="listingblock">
<div class="content">
<pre>curl -H "Content-Type: application/json" -X POST test-sync-bug-dynatrace.apps.aap-dt.ocp4.testing.ansible.com -d '{}'</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eda-rule-audit">7. Rule Audit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rule audit allows the auditing of rules which have been triggered by all the rules that were activated at some point.</p>
</div>
<div class="paragraph">
<p>The <strong>Rule Audit</strong> list view shows you a list of every time an event came in that matched a condition within a rulebook and triggered an action.
The list shows you rules within your rulebook and each heading matches up to a rule that has been executed.</p>
</div>
<div class="sect2">
<h3 id="eda-view-rule-audit-details">7.1. Viewing rule audit details</h3>
<div class="paragraph">
<p>From the <strong>Rule Audit</strong> list view you can check the event that triggered specific actions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eda-rule-audit-list-view.png" alt="Rule audit list view">
</div>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the navigation panel select <strong><span class="menuseq"><b class="menu">Automation Decisions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Rule Audit</b></span></strong>.</p>
</li>
<li>
<p>Select the desired rule, this brings you to the <strong>Details</strong> tab.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>From here you can view when it was created, when it was last fired, and the rulebook activation that it corresponds to.</p>
</div>
</div>
<div class="sect2">
<h3 id="eda-view-rule-audit-events">7.2. Viewing rule audit events</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Automation Decisions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Rule Audit</b></span></strong>.</p>
</li>
<li>
<p>Select the desired rule, this brings you to the <strong>Details</strong> tab. To view all the events that triggered an action, select the <strong>Events</strong> tab.
This shows you the event that triggered actions.</p>
</li>
<li>
<p>Select an event to view the <strong>Event log</strong>, along with the <strong>Source type</strong> and <strong>Timestamp</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eda-event-details.png" alt="Event details">
</div>
</div>
</div>
<div class="sect2">
<h3 id="eda-view-rule-audit-actions">7.3. Viewing rule audit actions</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the navigation panel select <strong><span class="menuseq"><b class="menu">Automation Decisions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Rule Audit</b></span></strong>.</p>
</li>
<li>
<p>Select the desired rule, this brings you to the <strong>Actions</strong> tab.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>From here you can view executed actions that were taken.
Some actions are linked out to automation controller where you can view the output.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-01-26 12:45:09 -0700
</div>
</div>
</body>
</html>