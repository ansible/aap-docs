[id="proc-aap-aws-removing-extension-nodes"]

= Running the ansible-on-clouds-ops container to remove the extension nodes

.Procedure
. To remove a set of extension nodes, run the command generator to generate the CLI command.
+
[options="nowrap" subs="+quotes,attributes"]
----
$ docker run --rm -v $(pwd)/command_generator_data:/data $IMAGE command_generator --data-file /data/extra_vars.yml
----
+
Provides the following command:
+
[options="nowrap" subs="+quotes,attributes"]
----
docker run --rm --env PLATFORM=AWS -v ~/.aws/credentials:/home/runner/.aws/credentials:ro\
 --env ANSIBLE_CONFIG=../aws-ansible.cfg  $IMAGE redhat.ansible_on_clouds.aws_remove_extension_nodes -e\ 'aws_foundation_stack_name=AnsibleAutomationPlatform aws_region=us-east-1 \
  aws_launch_template_name=ext-node-lt-1 aws_autoscaling_group_name=ext-node-asg-1'
----
. Run the supplied upgrade command to remove a set of extension nodes.
+
[options="nowrap" subs="+quotes,attributes"]
----
$ docker run --rm --env PLATFORM=AWS -v ~/.aws/credentials:/home/runner/.aws/credentials:ro\
 --env ANSIBLE_CONFIG=../aws-ansible.cfg  $IMAGE redhat.ansible_on_clouds.aws_remove_extension_nodes -e\ 'aws_foundation_stack_name=AnsibleAutomationPlatform aws_region=us-east-1 <
  aws_launch_template_name=ext-node-lt-1 aws_autoscaling_group_name=ext-node-asg-1'
----


