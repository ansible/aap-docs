[id="proc-gcp-run-restore-playbook-as-container"]

= Running the restore playbook as a container

.Procedure
. Replace `<absolute path to Google application credentials dir>` with the path to the service account credential JSON file for the Google cloud.
. Replace `<absolute path of extra vars dir>` with the path to the directory where the `extra_vars.yaml` file you created in step one of the backup process. 
+
. Use the following command to run the playbook.
+
[source,bash]
----
$ docker run --rm \
-v <absolute path to Google application credentials dir>:/secrets:ro \
-v <absolute path of extra vars dir>:/extra_vars:ro \
$IMAGE \
redhat.ansible_on_clouds.gcp_restore_deployment \
-e @/extra_vars/extra_vars.yaml
----
+
. When you have run the playbook, a new restored deployment is visible in the GCP deployment. 
It can take a few minutes for the deployment to finish and for all the containers to run.
+
[NOTE]
=====
Access to the restored deployment must be configured through either an external load balancer or VPN. 
When a connection method is configured you can log in to {PlatformName} {ControllerName} and {HubName} using your old deployment credentials. 
In addition, all job history, uploaded collections and other records must be in the same state as the restored deployment.
=====