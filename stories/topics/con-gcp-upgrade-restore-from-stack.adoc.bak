[id="con-gcp-upgrade-restore-from-stack"]

= Restoring the stack from backups

If, for some reason, the upgrade process fails, you can use the backup files from xref:proc-gcp-backup-platform-stack[Backing up your Ansible Automation Platform stack] to restore your stack.

[NOTE]
====
The following procedures are optional.
====

If the upgrade process fails, you can use the backup files from xref:con-gcp-upgrade-backup-process[Backing up before the upgrade] to restore your stack.
The restore process installs a new deployment, and restores the filestore and SQL database instance to the specified backup.

[NOTE]
====
The restored filestore instance uses CIDR network range 192.168.244.0/29, which is different from the default network filestore network range of the backup deployment.
====

The following instructions describe how to run the restore playbook.

include::proc-gcp-from-stack-pull-container-image.adoc[leveloffset=+1]
include::proc-gcp-prepare-backup-environment.adoc[leveloffset=+1]
include::proc-gcp-run-restore-playbook-as-container.adoc[leveloffset=+1]