[id="ref-aws-restore-process-permissions"]

= AWS permissions

You must have the following permissions granted to restore the deployment you are planning to restore.

[NOTE]
====
To verify permissions or debug permission denial issues, the link:https://policysim.aws.amazon.com/home/index.jsp[AWS IAM Policy Simulator] is helpful.
====

The following table contains a list of necessary IAM policies 

[cols="20%,20%",options="header"]
|====
| For deployment with a new VPC | For deployment with an existing VPC
a| autoscaling

* autoscaling:CreateAutoScalingGroup
* autoscaling:CreateLaunchConfiguration
* autoscaling:DeleteAutoScalingGroup
* autoscaling:DeleteLaunchConfiguration
* autoscaling:DescribeAutoScalingGroups
* autoscaling:DescribeAutoScalingInstances
* autoscaling:DescribeLaunchConfigurations
* autoscaling:DescribeScalingActivities
* autoscaling:UpdateAutoScalingGroup a| autoscaling

* autoscaling:CreateAutoScalingGroup
* autoscaling:CreateLaunchConfiguration
* autoscaling:DeleteAutoScalingGroup
* autoscaling:DeleteLaunchConfiguration
* autoscaling:DescribeAutoScalingGroups
* autoscaling:DescribeAutoScalingInstances
* autoscaling:DescribeLaunchConfigurations
* autoscaling:DescribeScalingActivities
* autoscaling:UpdateAutoScalingGroup
a| backup

* backup:DescribeRestoreJob
* backup:StartRestoreJob a| backup

* backup:DescribeRestoreJob
* backup:StartRestoreJob
a| cloudformation

* cloudformation:CreateChangeSet
* cloudformation:CreateStack
* cloudformation:CreateUploadBucket
* cloudformation:DeleteStack
* cloudformation:DescribeChangeSet
* cloudformation:DescribeStackEvents
* cloudformation:DescribeStacks
* cloudformation:ExecuteChangeSet
* cloudformation:GetStackPolicy
* cloudformation:GetTemplateSummary
* cloudformation:ListChangeSets
* cloudformation:ListStackResources
* cloudformation:ListStacks
* cloudformation:TagResource
* cloudformation:UpdateStack
* cloudformation:ValidateTemplate a| cloudformation

* cloudformation:CreateChangeSet
* cloudformation:CreateStack
* cloudformation:CreateUploadBucket
* cloudformation:DeleteStack
* cloudformation:DescribeChangeSet
* cloudformation:DescribeStackEvents
* cloudformation:DescribeStacks
* cloudformation:ExecuteChangeSet
* cloudformation:GetStackPolicy
* cloudformation:GetTemplateSummary
* cloudformation:ListChangeSets
* cloudformation:ListStackResources
* cloudformation:ListStacks
* cloudformation:TagResource
* cloudformation:UpdateStack
* cloudformation:ValidateTemplate
a| ec2

* ec2:AllocateAddress
* ec2:AssociateAddress
* ec2:AssociateNatGatewayAddress
* ec2:AssociateRouteTable
* ec2:AssociateSubnetCidrBlock
* ec2:AttachInternetGateway
* ec2:AuthorizeSecurityGroupEgress
* ec2:AuthorizeSecurityGroupIngress
* ec2:CreateInternetGateway
* ec2:CreateNatGateway
* ec2:CreateRoute
* ec2:CreateRouteTable
* ec2:CreateSecurityGroup
* ec2:CreateSubnet
* ec2:CreateSubnetCidrReservation
* ec2:CreateTags
* ec2:CreateVpc
* ec2:DeleteInternetGateway
* ec2:DeleteNatGateway
* ec2:DeleteRoute
* ec2:DeleteRouteTable
* ec2:DeleteSecurityGroup
* ec2:DeleteSubnet
* ec2:DeleteSubnetCidrReservation
* ec2:DeleteVpc
* ec2:DescribeAccountAttributes
* ec2:DescribeAddresses
* ec2:DescribeAddressesAttribute
* ec2:DescribeAvailabilityZones
* ec2:DescribeInstances
* ec2:DescribeInternetGateways
* ec2:DescribeKeyPairs
* ec2:DescribeNatGateways
* ec2:DescribeRouteTables
* ec2:DescribeSecurityGroups
* ec2:DescribeSubnets
* ec2:DescribeVpcs
* ec2:DetachInternetGateway
* ec2:DisassociateAddress
* ec2:DisassociateNatGatewayAddress
* ec2:DisassociateRouteTable
* ec2:DisassociateSubnetCidrBlock
* ec2:GetSubnetCidrReservations
* ec2:ModifyAddressAttribute
* ec2:ModifyVpcAttribute
* ec2:ReleaseAddress
* ec2:RevokeSecurityGroupEgress
* ec2:RevokeSecurityGroupIngress a| ec2

* ec2:RevokeSecurityGroupEgress
* ec2:RevokeSecurityGroupIngress
* ec2:DescribeKeyPairs
* ec2:CreateSecurityGroup
* ec2:DescribeSecurityGroups
* ec2:DeleteSecurityGroup
* ec2:CreateTags
* ec2:AuthorizeSecurityGroupEgress
* ec2:AuthorizeSecurityGroupIngress
* ec2:DescribeInstances
a| elasticfilesystem

* elasticfilesystem:CreateAccessPoint
* elasticfilesystem:CreateFileSystem
* elasticfilesystem:CreateMountTarget
* elasticfilesystem:DeleteAccessPoint
* elasticfilesystem:DeleteFileSystem
* elasticfilesystem:DeleteMountTarget
* elasticfilesystem:DescribeAccessPoints
* elasticfilesystem:DescribeBackupPolicy
* elasticfilesystem:DescribeFileSystemPolicy
* elasticfilesystem:DescribeFileSystems
* elasticfilesystem:DescribeLifecycleConfiguration
* elasticfilesystem:DescribeMountTargets a| elasticfilesystem

* elasticfilesystem:CreateAccessPoint
* elasticfilesystem:CreateFileSystem
* elasticfilesystem:CreateMountTarget
* elasticfilesystem:DeleteAccessPoint
* elasticfilesystem:DeleteFileSystem
* elasticfilesystem:DeleteMountTarget
* elasticfilesystem:DescribeAccessPoints
* elasticfilesystem:DescribeBackupPolicy
* elasticfilesystem:DescribeFileSystemPolicy
* elasticfilesystem:DescribeFileSystems
* elasticfilesystem:DescribeLifecycleConfiguration
* elasticfilesystem:DescribeMountTargets
a| elasticloadbalancing

* elasticloadbalancing:AddTags
* elasticloadbalancing:CreateListener
* elasticloadbalancing:CreateLoadBalancer
* elasticloadbalancing:CreateTargetGroup
* elasticloadbalancing:DeleteListener
* elasticloadbalancing:DeleteTargetGroup
* elasticloadbalancing:DescribeListeners
* elasticloadbalancing:DescribeTargetGroups
* elasticloadbalancing:ModifyLoadBalancerAttributes
* elasticloadbalancing:ModifyTargetGroupAttributes a| elasticloadbalancing

* elasticloadbalancing:AddTags
* elasticloadbalancing:CreateListener
* elasticloadbalancing:CreateLoadBalancer
* elasticloadbalancing:CreateTargetGroup
* elasticloadbalancing:DeleteListener
* elasticloadbalancing:DeleteTargetGroup
* elasticloadbalancing:DescribeListeners
* elasticloadbalancing:DescribeTargetGroups
* elasticloadbalancing:ModifyLoadBalancerAttributes
* elasticloadbalancing:ModifyTargetGroupAttributes
a| iam

* iam:AddRoleToInstanceProfile
* iam:AttachRolePolicy
* iam:CreateInstanceProfile
* iam:CreateRole
* iam:DeleteInstanceProfile
* iam:DeleteRole
* iam:DeleteRolePolicy
* iam:DetachRolePolicy
* iam:GetRolePolicy
* iam:ListRoles
* iam:PassRole
* iam:PutRolePolicy
* iam:RemoveRoleFromInstanceProfile
* iam:TagRole a| iam

* iam:AddRoleToInstanceProfile
* iam:AttachRolePolicy
* iam:CreateInstanceProfile
* iam:CreateRole
* iam:DeleteInstanceProfile
* iam:DeleteRole
* iam:DeleteRolePolicy
* iam:DetachRolePolicy
* iam:GetRolePolicy
* iam:ListRoles
* iam:PassRole
* iam:PutRolePolicy
* iam:RemoveRoleFromInstanceProfile
* iam:TagRole
a| kms

* kms:CreateGrant
* kms:Decrypt
* kms:DescribeKey
* kms:GenerateDataKey a| kms

* kms:CreateGrant
* kms:Decrypt
* kms:DescribeKey
* kms:GenerateDataKey
a| rds

* rds:AddTagsToResource
* rds:CreateDBInstance
* rds:CreateDBSubnetGroup
* rds:DeleteDBInstance
* rds:DeleteDBSubnetGroup
* rds:DescribeDBInstances
* rds:DescribeDBSnapshots
* rds:DescribeDBSubnetGroups
* rds:ModifyDBInstance
* rds:RestoreDBInstanceFromDBSnapshot a| rds

* rds:AddTagsToResource
* rds:CreateDBInstance
* rds:CreateDBSubnetGroup
* rds:DeleteDBInstance
* rds:DeleteDBSubnetGroup
* rds:DescribeDBInstances
* rds:DescribeDBSnapshots
* rds:DescribeDBSubnetGroups
* rds:ModifyDBInstance
* rds:RestoreDBInstanceFromDBSnapshot
a| s3

* s3:CreateBucket
* s3:GetObject
* s3:PutObject a| s3

* s3:CreateBucket
* s3:GetObject
* s3:PutObject
a| secretsmanager

* secretsmanager:CreateSecret
* secretsmanager:DeleteSecret
* secretsmanager:GetRandomPassword
* secretsmanager:GetSecretValue
* secretsmanager:PutSecretValue
* secretsmanager:TagResource a| secretsmanager

* secretsmanager:CreateSecret
* secretsmanager:DeleteSecret
* secretsmanager:GetRandomPassword
* secretsmanager:GetSecretValue
* secretsmanager:PutSecretValue
* secretsmanager:TagResource
a| sns

* sns:ListTopics a| sns

* sns:ListTopics 
|====