:_mod-docs-content-type: CONCEPT

[id="con-aws-update-backup-data-file"]

= Updating the backup data file

You must populate the data file before triggering the backup. 
The following variables are parameters listed in the data file.

* `ansible_config_path` (Optional) Only use if overriding with a customer `ansible_config`.
* `cloud_credentials_path` is the path to your AWS credentials file.
* `deployment_name` is the name of the foundation deployment. This is the same name you used when you deployed the foundation.
* `aws_backup_iam_role_arn` is the _Amazon Resource Name_ (ARN) of the AWS IAM Role that has permissions to perform backup operations.
+
[NOTE]
====
You can use the AWS Backup Default Service Role for this which has the format `arn:aws:iam::<Your AWS Account Number>:role/service-role/AWSBackupDefaultServiceRole`. 
====
+
* `aws_backup_vault_name` is the name of the backup vault that will hold the EFS recovery points.
+
[NOTE]
====
Please ensure the referenced backup vault exists and the AWS Backup IAM role provided above has the required permissions to create an EFS recovery point inside the vault. 
====
+
* `aws_region` is the region where the foundation deployment is deployed.
* `aws_s3_bucket` is the name of the S3 bucket where the backup files are stored. 
This creates a new bucket if one does not already exist. 
Every backup is stored in the bucket. +
For guidance on bucket naming, see link:https://www.google.com/url?q=https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html&sa=D&source=docs&ust=1682584492105680&usg=AOvVaw0WgUwkieoKwP4tRrvSpFBC[Bucket naming rules]. +
For guidance on creating S3 buckets, see link:https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html[AWS Creating a bucket].
* `aws_ssm_bucket_name` is the name of the S3 bucket where temporary configuration files for the AWS SSM are stored. You can use an existing bucket or create a new one.
+
[NOTE]
====
The `aws_ssm_bucket_name` parameter is ONLY used to store temporary config files. It does NOT need to be saved for use in other playbooks. Any valid existing bucket can be used. For more information on creating S3 buckets, read link:https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html[AWS Creating A Bucket] in the AWS documentation.
====
+
* `backup_prefix` is a prefix you would like to add to the backup name (default: aoc-backup)

When you have populated the data file, it should resemble the following. 
The values in this file are provided as examples:

[NOTE]
====
The optional value `ansible_config_path` has been removed. If you do not wish to use this optional value and want to use the default value for this variables, you 'must' also remove it for your data file like it was done in the example below. If you wish to use this optional variable, it 'must' be included in the data file and be assigned a value. 
====

[literal, options="nowrap" subs="+attributes"]
----
aws_backup_stack:
  cloud_credentials_path: ~/.aws/credentials
  deployment_name: AnsibleAutomationPlatform
  extra_vars:
    aws_backup_iam_role_arn: arn:aws:iam::<Your AWS Account Number>:role/service-role/AWSBackupDefaultServiceRole
    aws_backup_vault_name: Default
    aws_region: us-east-1
    aws_s3_bucket: ansible-automation-platform-bucket
    aws_ssm_bucket_name: aap-ssm-bucket
    backup_prefix: aoc-backup
----

